<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Savings Tracker</title>
    <!-- Tailwind CSS CDN for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #000000;
            color: #ffffff;
        }
    </style>
</head>
<body class="p-4 md:p-8 flex items-center justify-center min-h-screen">

    <div class="w-full max-w-2xl bg-zinc-900 rounded-xl p-6 md:p-8 shadow-lg">
        <h1 class="text-3xl md:text-4xl font-bold text-center text-white mb-6">
            เป้าหมายการออมของคุณ
        </h1>

        <!-- Image section with file upload -->
        <div class="relative w-full h-64 md:h-80 bg-zinc-800 rounded-xl flex items-center justify-center mb-6 overflow-hidden border-2 border-dashed border-gray-700">
            <img id="goal-image" src="https://placehold.co/600x400/18181b/ffffff?text=อัปโหลดรูปภาพเป้าหมาย" alt="Goal Image" class="w-full h-full object-cover transition-opacity duration-300">
            <label for="image-uploader" class="absolute inset-0 flex items-center justify-center cursor-pointer text-gray-500 hover:text-gray-400">
                <span id="upload-text" class="text-lg md:text-xl font-medium z-10 transition-opacity duration-300">คลิกเพื่ออัปโหลด</span>
                <input type="file" id="image-uploader" class="absolute inset-0 opacity-0 cursor-pointer">
            </label>
        </div>

        <!-- Input fields section -->
        <div class="space-y-4 mb-6">
            <div>
                <label for="goal-name" class="block text-gray-400 font-medium mb-1">ชื่อเป้าหมาย</label>
                <input type="text" id="goal-name" placeholder="เช่น MacBook Pro" class="w-full p-3 bg-zinc-800 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 transition-all duration-300">
            </div>
            
            <div class="grid grid-cols-2 gap-4">
                <div>
                    <label for="target-price" id="target-price-label" class="block text-gray-400 font-medium mb-1">ราคาเป้าหมาย (฿)</label>
                    <input type="number" id="target-price" value="10000" class="w-full p-3 bg-zinc-800 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 transition-all duration-300">
                </div>
                <div>
                    <label for="currency-selector" class="block text-gray-400 font-medium mb-1">สกุลเงิน</label>
                    <select id="currency-selector" class="w-full p-3 bg-zinc-800 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 transition-all duration-300">
                        <option value="THB">บาทไทย (฿)</option>
                        <option value="LAK">กีบลาว (₭)</option>
                        <option value="USD">ดอลลาร์สหรัฐ ($)</option>
                    </select>
                </div>
            </div>

            <div>
                <label for="current-savings" id="current-savings-label" class="block text-gray-400 font-medium mb-1">เงินที่มีอยู่ตอนนี้ (฿)</label>
                <input type="number" id="current-savings" value="100" class="w-full p-3 bg-zinc-800 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 transition-all duration-300">
            </div>
        </div>

        <!-- Progress bar and percentage display -->
        <div class="mb-4">
            <div class="flex justify-between items-center mb-2">
                <span id="percentage-text" class="text-white text-xl md:text-2xl font-bold">1%</span>
            </div>
            <div class="w-full bg-zinc-800 rounded-full h-4 overflow-hidden">
                <div id="progress-bar" class="bg-purple-500 h-full rounded-full transition-all duration-500 ease-in-out" style="width: 1%;"></div>
            </div>
        </div>

        <!-- Motivational message -->
        <p id="motivational-message" class="text-center text-gray-400 text-sm italic">
            เหลืออีก 9,900 บาท! สู้ๆ นะ!
        </p>
    </div>

    <script>
        // Get references to all necessary DOM elements
        const targetPriceInput = document.getElementById('target-price');
        const currentSavingsInput = document.getElementById('current-savings');
        const progressBar = document.getElementById('progress-bar');
        const percentageText = document.getElementById('percentage-text');
        const motivationalMessage = document.getElementById('motivational-message');
        const imageUploader = document.getElementById('image-uploader');
        const goalImage = document.getElementById('goal-image');
        const uploadText = document.getElementById('upload-text');
        const currencySelector = document.getElementById('currency-selector');
        const targetPriceLabel = document.getElementById('target-price-label');
        const currentSavingsLabel = document.getElementById('current-savings-label');

        // Function to get the currency symbol based on the selected value
        function getCurrencySymbol(currency) {
            switch (currency) {
                case 'THB':
                    return '฿';
                case 'LAK':
                    return '₭';
                case 'USD':
                    return '$';
                default:
                    return '';
            }
        }

        // Function to update the progress bar and text
        function updateProgress() {
            // Get the values from the input fields and parse them as floating-point numbers
            const targetPrice = parseFloat(targetPriceInput.value);
            const currentSavings = parseFloat(currentSavingsInput.value);
            const selectedCurrency = currencySelector.value;
            const currencySymbol = getCurrencySymbol(selectedCurrency);

            // Update labels to show the correct currency symbol
            targetPriceLabel.textContent = `ราคาเป้าหมาย (${currencySymbol})`;
            currentSavingsLabel.textContent = `เงินที่มีอยู่ตอนนี้ (${currencySymbol})`;

            // Check if the inputs are valid numbers and the target price is not zero or negative
            if (isNaN(targetPrice) || isNaN(currentSavings) || targetPrice <= 0) {
                progressBar.style.width = '0%';
                percentageText.textContent = '0%';
                motivationalMessage.textContent = 'กรุณากรอกราคาเป้าหมายที่ถูกต้อง';
                return; // Exit the function if inputs are invalid
            }

            // Calculate the percentage of savings
            let percentage = (currentSavings / targetPrice) * 100;

            // Ensure the percentage is not more than 100% or less than 0%
            if (percentage > 100) {
                percentage = 100;
            } else if (percentage < 0) {
                percentage = 0;
            }

            // Update the width of the progress bar
            progressBar.style.width = percentage.toFixed(2) + '%';

            // Update the percentage text display
            percentageText.textContent = percentage.toFixed(2) + '%';

            // Calculate the remaining amount needed
            const remainingAmount = targetPrice - currentSavings;

            // Update the motivational message based on progress
            if (remainingAmount <= 0) {
                motivationalMessage.textContent = 'ยินดีด้วย! คุณบรรลุเป้าหมายแล้ว!';
            } else {
                motivationalMessage.textContent = `เหลืออีก ${remainingAmount.toLocaleString()} ${currencySymbol}! สู้ๆ นะ!`;
            }
        }

        // Function to handle image upload and preview
        function handleImageUpload(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    goalImage.src = e.target.result;
                    uploadText.style.opacity = '0'; // Hide the upload text
                    goalImage.style.opacity = '1'; // Show the image
                };
                reader.readAsDataURL(file);
            }
        }

        // Add event listeners to trigger the updateProgress function on input change
        targetPriceInput.addEventListener('input', updateProgress);
        currentSavingsInput.addEventListener('input', updateProgress);
        currencySelector.addEventListener('change', updateProgress);
        imageUploader.addEventListener('change', handleImageUpload);

        // Initial call to set the progress bar state on page load
        document.addEventListener('DOMContentLoaded', updateProgress);
    </script>

</body>
</html>
